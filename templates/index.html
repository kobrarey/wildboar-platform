<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WildBoar — Вход / Регистрация</title>
  <link rel="stylesheet" href="/static/css/app.css" />
  <script defer src="/static/js/app.js?v=5_2"></script>
  <style>
    .is-hidden { display: none !important; }
  </style>
</head>

<body class="page page--landing">
  <header class="topbar">
    <div class="topbar__spacer"></div>

    <div class="topbar__actions">
      <button class="btn btn--ghost" type="button" data-modal-open="registerModal">Регистрация</button>
      <button class="btn btn--primary" type="button" data-modal-open="loginModal">Войти</button>
    </div>
  </header>

  <main class="landing"></main>

  <!-- LOGIN MODAL -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="modal__overlay" data-modal-close></div>

    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <button class="modal__close" type="button" aria-label="Закрыть" data-modal-close>×</button>

      <h1 class="modal__title" id="loginTitle">Вход</h1>

      <form class="form" method="post" action="/login" autocomplete="on" id="loginForm" novalidate>
        <label class="field">
          <span class="field__label">ЭЛЕКТРОННАЯ ПОЧТА *</span>
          <input class="field__input" type="email" name="email" placeholder="name@example.com" />
        </label>

        <label class="field">
          <span class="field__label">ПАРОЛЬ *</span>
          <input class="field__input" type="password" name="password" placeholder="••••••••" />
        </label>

        <button class="btn btn--primary btn--block" type="submit">Войти</button>

        <!-- Ошибка логина (401 / прочие) -->
        <div class="form-error" id="loginError" role="alert" aria-live="polite"></div>

        <button class="link link--muted" type="button" aria-disabled="true" title="Будет добавлено на следующем этапе">
          Забыли пароль?
        </button>
      </form>
    </div>
  </div>

  <!-- REGISTER MODAL -->
  <div class="modal" id="registerModal" aria-hidden="true">
    <div class="modal__overlay" data-modal-close></div>

    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="registerTitle">
      <button class="modal__close" type="button" aria-label="Закрыть" data-modal-close>×</button>

      <h1 class="modal__title" id="registerTitle">Регистрация в личном кабинете</h1>

      <form class="form" method="post" action="/register" autocomplete="on" id="registerForm" novalidate>
        <div id="registerStep1">
        <div class="form__row">
          <label class="field">
            <span class="field__label">ИМЯ *</span>
            <input class="field__input" type="text" name="first_name" />
          </label>

          <label class="field">
            <span class="field__label">ФАМИЛИЯ *</span>
            <input class="field__input" type="text" name="last_name" />
          </label>
        </div>

        <label class="field">
          <span class="field__label">ЭЛЕКТРОННАЯ ПОЧТА *</span>
          <input class="field__input" type="email" name="email" placeholder="name@example.com" />
        </label>

        <label class="field">
          <span class="field__label">НОМЕР ТЕЛЕФОНА</span>
          <input
            class="field__input"
            type="tel"
            name="phone"
            id="regPhone"
            placeholder="+1 555 123 4567"
            inputmode="tel"
            autocomplete="tel"
          />
        </label>

        <label class="field">
          <span class="field__label">ПАРОЛЬ *</span>
          <input
            class="field__input"
            type="password"
            name="password"
            id="registerPassword"
            placeholder="Введите пароль"
          />

          <!-- Список условий (статично в HTML, подсветка через JS) -->
          <ul class="password-rules" id="passwordRules">
            <li class="rule rule-bad" data-rule="len">Длина ≥ 8</li>
            <li class="rule rule-bad" data-rule="digit">Минимум 1 цифра</li>
            <li class="rule rule-bad" data-rule="lower">Минимум 1 строчная буква</li>
            <li class="rule rule-bad" data-rule="upper">Минимум 1 заглавная буква</li>
            <li class="rule rule-bad" data-rule="special">Минимум 1 спецсимвол</li>
            <li class="rule rule-bad" data-rule="nospace">Без пробелов/табов/переводов строки</li>
          </ul>
        </label>

        <a href="/useragreement" target="_blank" rel="noopener" class="link">Пользовательские условия</a>

        <div class="reg-agree">
          <label class="check">
            <input class="check__input" type="checkbox" id="termsCheck" />
            <span class="check__box" aria-hidden="true"></span>
            <span class="check__label">Прочитал и принимаю условия *</span>
          </label>
        </div>

        <button class="btn btn--primary btn--block" type="submit" id="registerSubmit" disabled>
          Зарегистрироваться
        </button>

        <!-- Ошибка регистрации (400: email занят / пароль и т.п.) -->
        <div class="form-error" id="registerError" role="alert" aria-live="polite"></div>
        </div>

        <div id="registerStep2" class="is-hidden">
          <h3 style="margin-top:0;">Подтвердите email</h3>
          <p class="muted" id="registerCodeHint">Мы отправили код на вашу почту.</p>

          <label class="field">
            <span class="field__label">Код из письма</span>
            <input class="field__input" id="registerCode" type="text" inputmode="numeric" autocomplete="one-time-code" placeholder="Введите код" />
          </label>

          <button type="button" class="btn btn--primary btn--block" id="registerConfirmBtn" disabled>
            Подтвердить
          </button>

          <div class="form-error" id="registerConfirmError" role="alert" aria-live="polite"></div>
        </div>
      </form>
    </div>
  </div>
</body>
</html>

